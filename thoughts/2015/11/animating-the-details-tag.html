<!doctype html>

<html prefix="og: http://ogp.me/ns#">
<meta charset="utf-8">

<!-- Looking at the 'ol source code, huh? Well lucky you! Here's an easer egg:
    cwervo.com/easter-egg
          __
      .-*)) `*-.
     /*  ((*   *'.
    |   *))  *   *\
    | *  ((*   *  /
     \  *))  *  .'
 jgs  '-.((*_.-'

ASCII art courtesy of: http://www.chris.com/ascii/index.php?art=holiday/easter
-->

<!-- Always force latest IE rendering engine or request Chrome Frame -->
<meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
<meta name="viewport" content="width=device-width" ></meta>
<link rel="shortcut icon" href="/images/favicon-1846b7e2.png">

<!-- Use title if it's in the page YAML frontmatter -->
<title>cwervo.com - Animating The Details Tag</title>

<!-- Facebook Open Graph Protocol Stuff -->
<meta property="og:title" content="Animating The Details Tag" />
<meta property="og:site_name" content="Cwervo.com - Thoughts Blog">
<meta property="og:type" content="article" />
<meta property="og:description" content="Just a few notes on how I animated the details tag for a project." />
<meta property="og:url" content="http://www.cwervo.com/thoughts/2015/11/animating-the-details-tag.html" />
<meta property="og:image" content="http://www.cwervo.com/images/big-logo-33b7b0ea.png" />

<link href="/stylesheets/normalize-7efa2312.css" rel="stylesheet" type="text/css" />
<link href="/stylesheets/main-97945ec7.css" rel="stylesheet" type="text/css" />



<script src="/javascripts/all-5af674d6.js" type="text/javascript"></script>

<script src="/javascripts/twitter-share-button-8a10f132.js" type="text/javascript"></script>


<body class="thoughts thoughts_2015 thoughts_2015_11 thoughts_2015_11_animating-the-details-tag">
    <div id="fb-root"></div>
    <script>(function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.4&appId=876359652399612";
    fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));</script>


<nav>
    <ul>
        <div class="close-container">
            <li class="close"><a href="##close" id="close" class="close">x</a></li>
        </div>
        <div class="nav-list-container">
            <li><a href="/">Home</a></li>
            <li><a href="/about/">About me</a></li>
            <li><a href="/portfolio/">Portfolio</a></li>
            <li><a href="/case-studies/">Case studies</a></li>
            <!-- <li><a href="/projects/">'no projects, just case studies???'</a></li> -->
            <li><a href="/thoughts/">Thoughts</a></li>
            <li><a href="/contact/">Contact</a></li>
        </div>
    </ul>
</nav>

<section class="content-wrapper">
    <section class="content">
            <!--
    <aside>
        Andres Cuervo

            <h4>5 Most Recent Posts!</h4>
            <hr>

                <article class="article-sample" style="background-color: #222; padding: 0.2em 0.4em; border-radius: 10px; witdth: 100%">
                    <h5>
                        <a style="float: right" href="/thoughts/2017/01/notes-on-fb-360.html">Notes on FB 360</a>
                        <br>
                        <time style="float: right" >Jan  9 2017</time>
                    </h5>

                </article>
                <article class="article-sample" style="background-color: #222; padding: 0.2em 0.4em; border-radius: 10px; witdth: 100%">
                    <h5>
                        <a style="float: right" href="/thoughts/2016/04/google-doc-navigation-tips.html">Back To The Top</a>
                        <br>
                        <time style="float: right" >Apr 15 2016</time>
                    </h5>

                </article>
                <article class="article-sample" style="background-color: #222; padding: 0.2em 0.4em; border-radius: 10px; witdth: 100%">
                    <h5>
                        <a style="float: right" href="/thoughts/2016/04/best-practices-are.html">Design Best Practices Are Holding You Back</a>
                        <br>
                        <time style="float: right" >Apr 13 2016</time>
                    </h5>

                </article>
                <article class="article-sample" style="background-color: #222; padding: 0.2em 0.4em; border-radius: 10px; witdth: 100%">
                    <h5>
                        <a style="float: right" href="/thoughts/2016/04/making-data-meaningful.html">Making Data Meaningful</a>
                        <br>
                        <time style="float: right" >Apr  6 2016</time>
                    </h5>

                </article>
                <article class="article-sample" style="background-color: #222; padding: 0.2em 0.4em; border-radius: 10px; witdth: 100%">
                    <h5>
                        <a style="float: right" href="/thoughts/2016/04/antidisciplinary-project-based-learning-and-you.html">Breaking Project Based Learning And The Concept Of Academic Disciplines</a>
                        <br>
                        <time style="float: right" >Apr  5 2016</time>
                    </h5>

                </article>
    </aside> -->
    <article>
        <h1 class="blog-title">Animating The Details Tag</h1>
        <h3 class="blog-description">Just a few notes on how I animated the details tag for a project.</h3>
        <h3 class="blog-tags">tags: </h3>
        <div class="blog-date">
            Nov 27, 2015
        </div>
        <hr>
        <style>
@keyframes fadeInDown {
    0% {
        opacity: 0.5;
        transform: translateY(-1.25em);
    }
    100% {
        opacity: 1;
        transform: translateY(0);
    }
}

.onlyOpen[open], .bothAnimations[open]{
    animation-name: fadeInDown;
    animation-duration: 0.5s;
}


.onlyClose, .bothAnimations {
    transition: height 1s ease;
}

.onlyClose:not([open]), .bothAnimations:not([open]) {
    height: 0;
}

.onlyClose[open], .bothAnimations[open]{
    height: 3em;
}
</style>

<p>I’m the front end developer and designer for Oberlin’s <a href="environmentaldashboard.org">Environmental
Dashboard</a> and as such I get to tackle interesting
challenges from a technical and a design perspective every week. Today I just
want to take a quick look at how I solved the task of making the <code>&lt;details&gt;</code>
element animate to open smoothly rather than jarringly snap open and closed.</p>

<p>The easiest way to achieve this effect, I knew when looking for solutions,
would be to use some CSS animation, because why add the bloat of performant JS
animation when the browser can render it natively? So, with that in mind I took
a page from Dan Eden’s wonderful
<a href="http://daneden.github.io/animate.css/">Animate.css</a> project, specifically the
rule for a fading in and down transition:</p>

<div class="highlight plaintext"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10</pre></td><td class="code"><pre>@keyframes fadeInDown {
    0% {
        opacity: 0.5;
        transform: translateY(-1.25em);
    }
    100% {
        opacity: 1;
        transform: translateY(0);
    }
}
</pre></td></tr></tbody></table>
</div>

<p>I want this to apply to all of the detail elements, so I simply use the
keyframes animation declared above in the global ‘Custom CSS’ in our Wordpress
settings.</p>

<div class="highlight plaintext"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4</pre></td><td class="code"><pre>details[open] {
    animation-name: fadeInDown;
    animation-duration: 0.5s;
}
</pre></td></tr></tbody></table>
</div>

<p>With that you get something that looks like:</p>

<details class="onlyOpen">
<summary>This is the summary text.</summary>
This details text animates on open!
</details>

<p>Looking good! But notice when you click the element above to close it
everything underneath sort of just snaps back into place, we can do better than
that, right?</p>

<p>For the animation to close the details element I wanted something that
would force the other elements around it to also transition smoothly. A natural
fit was the height property, which will repaint as it animates, allowing the
other elements around it (namely, below) to adjust without much ‘jank’. The
rule for that is simply defining a transition for the details element’s height:</p>

<div class="highlight plaintext"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3</pre></td><td class="code"><pre>details {
    transition: height 1s ease;
}
</pre></td></tr></tbody></table>
</div>

<p>And two more little rules, one that defines the height to be 0 when the details
element is <code>not([open])</code> and another that expands its height when the element
is <code>[open]</code>:</p>

<div class="highlight plaintext"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7</pre></td><td class="code"><pre>details:not([open]) {
    height: 0;
}

details[open] {
    height: 200px;
}
</pre></td></tr></tbody></table>
</div>

<p>That animation alone gives you a details element like this:</p>

<details class="onlyClose">
<summary>This is the summary text.</summary>
This details text animates on closing!
</details>

<p>That’s nice, but if you try clicking on that element above you’ll see the
problem with only having this animation: it closes really nicely, but doesn’t
do so well opening the text, in particular the text shows up too fast. There
are a number of ways to solve this problem, but I decided the most elegant solution for this case was to combine the two animations!</p>

<details class="bothAnimations">
<summary>This is the summary text.</summary>
This details text animates on both opening and closing!
</details>

<p>And here’s a GIF of it at work on the Oberlin Environmental Dashboard website:</p>

<p><img src="../../../images/details animation on the environmental dashboard site-709987cb.gif" alt="A GIF of the details element animating upon opening on a page at environmentaldashboard.org" /></p>

<p>I’m really happy with how it turned out and that I could quickly and easily
solve this issue! Of course, there’s more work that goes into making this all
work: a <code>&lt;details&gt;</code> polyfill for browsers that don’t yet support it, styling
the details and summary elements themselves, and ensuring consistency and
readability, but this was a nice deconstruction of just one part of my job and
I hope it helps anyone trying to figure this out in the future!</p>

        <br/>
        <span style="float: right;">
            — Andres Cuervo
        </span>
    </article>
</section>
<section class="social-stuff">
    <h1 style="display: inline;">Want to share this post?</h1>
    <br/>
<div class="social-buttons">
    <Facebook >
    <div class="fb-like"
        data-href="http://cwervo.com/thoughts/2015/11/animating-the-details-tag.html"
        data-layout="button_count" data-action="like" data-show-faces="true"
        data-share="true">
    </div>
    <a class="twitter-share-button"
        href="https://twitter.com/intent/tweet?url=http://cwervo.com/thoughts/2015/11/animating-the-details-tag.html&text=I just read:&via=acwervo">Tweet this!</a>
    <a href="https://news.ycombinator.com/submit" class="hn-button" data-title="Animating The Details Tag" data-url="http://cwervo.com/thoughts/2015/11/animating-the-details-tag.html" data-count="horizontal">Vote on Hacker News</a>
    <script type="text/javascript">var HN=[];HN.factory=function(e){return function(){HN.push([e].concat(Array.prototype.slice.call(arguments,0)))};},HN.on=HN.factory("on"),HN.once=HN.factory("once"),HN.off=HN.factory("off"),HN.emit=HN.factory("emit"),HN.load=function(){var e="hn-button.js";if(document.getElementById(e))return;var t=document.createElement("script");t.id=e,t.src="//hn-button.herokuapp.com/hn-button.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n)},HN.load();</script>
    <a data-pocket-label="pocket" data-pocket-count="horizontal" class="pocket-btn" data-lang="en"></a>
    <script type="text/javascript">!function(d,i){if(!d.getElementById(i)){var j=d.createElement("script");j.id=i;j.src="https://widgets.getpocket.com/v1/j/btn.js?v=1";var w=d.getElementById(i);d.body.appendChild(j);}}(document,"pocket-btn-js");</script>
</div>

</section>
<!-- <section id="comments"> -->
<!--      -->
<!-- </section> -->

        
                                  </section>

                                  <!-- Click Tracking -->
                                  <a title="Real Time Web Analytics" href="https://clicky.com/100865482"></a>
                                  <script type="text/javascript">
                                      var clicky_site_ids = clicky_site_ids || [];
                                      clicky_site_ids.push(100865482);
                                      (function() {
                                          var s = document.createElement('script');
                                          s.type = 'text/javascript';
                                          s.async = true;
                                          s.src = '//static.getclicky.com/js';
                                          ( document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0] ).appendChild( s );
                                      })();
                                  </script>
                                  <noscript></noscript>


                              </body>

